{% extends "webgateway/core_html.html" %}
{% load i18n %}

{% comment %}
<!--
  Copyright (C) 2011-2014 University of Dundee & Open Microscopy Environment.
  All rights reserved.

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as
  published by the Free Software Foundation, either version 3 of the
  License, or (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
{% endcomment %}

{% block link %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static "webclient/css/layout.css"|add:url_suffix %}" type="text/css" />
    <link rel="stylesheet" href="{% static "webgateway/css/ome.login.css"|add:url_suffix %}" type="text/css" />
    
    <!-- Amsterdam UMC Custom Styling -->
    <style>
        /* Amsterdam UMC Blue and Orange Branding */
        body {
            background-color: #004d87 !important; /* Amsterdam UMC Blue */
        }
        
        #login {
            background: rgba(255, 102, 0, 0.9) !important; /* Bright orange background */
            border-radius: 15px !important;
            border: 5px solid #ff6600 !important;
            box-shadow: 0 8px 16px rgba(255, 102, 0, 0.5) !important;
            padding: 30px !important;
        }
        
        .button.omero-feature {
            background-color: #ff6600 !important;
            border: 1px solid #e55a00 !important;
            color: white !important;
        }
        
        .button.omero-feature:hover {
            background-color: #e55a00 !important;
        }
        
        .banner-container {
            text-align: center;
            padding: 20px 0;
            background: rgba(255, 255, 255, 0.9);
            margin-bottom: 20px;
            border-radius: 10px 10px 0 0;
        }
        
        .banner-image {
            max-width: 300px;
            height: auto;
        }
        
        .footer-content {
            background: rgba(0, 77, 135, 0.9) !important;
            border-radius: 0 0 10px 10px;
        }
        
        .footer-section {
            color: white !important;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .footer-section:hover {
            background: rgba(255, 102, 0, 0.1) !important;
        }
        
        input[type="text"], input[type="password"] {
            border: 2px solid #004d87;
            border-radius: 5px;
        }
        
        input[type="text"]:focus, input[type="password"]:focus {
            border-color: #ff6600;
            box-shadow: 0 0 5px rgba(255, 102, 0, 0.3);
        }
    </style>
{% endblock %}

{% block title %}
    {% trans "OMERO.web - Login" %}
{% endblock %}


{% block script %}
    
	{% include "webgateway/base/includes/script_src_jquery.html" %}
	<script src="{% static 'webclient/javascript/jquery.infieldlabel-0.1.js' %}" type="text/javascript"></script>

{% endblock %}


{% block head %}
    {{ block.super }}
	
	<script type="text/javascript" charset="utf-8">
			$(function(){ $("label").inFieldLabels(); });
		</script>
	
{% endblock %}

{% block body %}

<div style="margin: auto">
    <div class="login-logos">
    </div>
</div>

<script>
    /*
     * Function to alternate between background images for the login
     *
     * Some notes: static folder and image names must be hard-coded for js to access.
     *             Images names are hard coded, and defined in the template. 
     *             If you want to change the images, modify the template file.
     */

    // Array of images - ORIGINAL AMSTERDAM UMC IMAGES
    const images = [
        '/static/webclient/image/login_page_images/AFM_and_beads.jpg',
        '/static/webclient/image/login_page_images/Duolink_new.png',
        '/static/webclient/image/login_page_images/GFP_neurons.jpg'
    ];

    let currentImageIndex = 0;

    function changeImage() {
        currentImageIndex = (currentImageIndex + 1) % images.length;
        document.body.style.backgroundImage = `url('${images[currentImageIndex]}')`;
    }
    
    // Set the initial background image
    document.addEventListener('DOMContentLoaded', function() {
        document.body.style.backgroundImage = `url('${images[0]}')`;
        // Change image every 5 seconds
        setInterval(changeImage, 5000);
    });
    
    // for the sake of debugging - this function shows the next image immediately
    function doChangeImage() {
        changeImage();
    }
</script>

<!-- Amsterdam UMC Banner -->
<div class="banner-container">
    <img src="{% static 'webclient/image/login_page_images/AmsterdamUMC-logo.png' %}" alt="Amsterdam UMC Logo" class="banner-image">
</div>

<div id="login">
    {% block login %}
    <form class="standard_form inlined" action="{% url 'weblogin' %}{% if url %}?{{url}}{% endif %}" method="post">{% csrf_token %}
            <img src="{% static 'webclient/image/login_page_images/omero_web_logo.svg' %}" class="omero-web-logo" />
            
            {% if error %}
				<span class="error">{% trans "Error:" %} {{ error | urlize }}</span>
			{% endif %}
			
			<input type="hidden" name="{{ form.server.name }}" value="1" />

			<div>
				{% trans form.username.label_tag %}
				<!--{% if form.username.field.required %}*{% endif %} -->
				{{ form.username }}
				<!-- Form Error -->
				{% if form.username.errors %}
                  {% for error in form.username.errors %}
                      <span class="form_error">{{ error|escape }}</span>
                  {% endfor %}
				{% endif %}
			</div>
			
			<div>
				{% trans form.password.label_tag %}
				<!--{% if form.password.field.required %}*{% endif %} -->
				{{ form.password }}
				<!-- Form Error -->
				{% if form.password.errors %}
                  {% for error in form.password.errors %}
                      <span class="form_error">{{ error|escape }}</span>
                  {% endfor %}
				{% endif %}
			</div>
			<div class="login-action">
				<input type="submit" class="button omero-feature" value="{% trans "Login" %}" />
			</div>

    </form>

    {% endblock %}
</div>

<!-- Amsterdam UMC Footer -->
<div class="footer-content">
    <a href="https://www.amsterdamumc.org" class="footer-section custom-banner" target="_blank" rel="noopener noreferrer">
        <img src="{% static 'webclient/image/login_page_images/AmsterdamUMC-logo.png' %}" alt="Amsterdam UMC" class="section-icon">
        <p class="section-text">Amsterdam UMC <br> Academic Medical Center <br> Advanced microscopy facility</p>
    </a>
    <a href="https://arxiv.org/abs/2511.13611" class="footer-section uploader-section" target="_blank" rel="noopener noreferrer">
        <img src="{% static 'webclient/image/login_page_images/biomero-logo.svg' %}" alt="BIOMERO 2.0 Paper" class="section-icon">
        <p class="section-text">BIOMERO 2.0 deployment <br> Read the paper here!</p>
    </a>
</div>

<div id="login-footer">
    <p>
        OMERO.web {{ version }}.<br/>
        {% if env %}
        Environment {{ env }}<br/>
        {% endif %}
        &copy; 2007-{{ build_year }} University of Dundee &amp; Open Microscopy Environment<br/>
        OMERO is distributed under the terms of the GNU GPL.<br/>
        For more information, visit <a href="https://www.openmicroscopy.org">openmicroscopy.org</a>
    </p>
</div>
{% endblock %}